@use "sass:string";

@use "../user";
@use "../util";

@mixin __whitespace {
	$amp: util.get-ampersand();

	// Text does not wrap.
	#{$amp}whitespace-pre {
		white-space: pre;
	}
	// Text wraps.
	#{$amp}whitespace-pre-wrap {
		white-space: pre-wrap;
	}
}

@mixin __text-align {
	$amp: util.get-ampersand();

	#{$amp}text-center {
		text-align: center;
	}
}

@mixin __font-weight {
	$amp: util.get-ampersand();

	@each $v in util.range(100, 900, 100) {
		#{$amp}font-#{$v} {
			font-weight: #{$v};
		}
	}
}

@mixin __font-size-from-range($range, $resolver) {
	// prettier-ignore
	@include util.generate-from-range(
		"text",
		(font-size),
		$range,
		$resolver,
	);
}

@mixin __line-height-from-range($range) {
	// prettier-ignore
	@include util.generate-from-range(
		"leading",
		(line-height),
		$range,
		none,
	);
}

@mixin __text-decoration {
	$amp: util.get-ampersand();

	@each $v in (line-through, underline) {
		#{$amp}#{$v} {
			text-decoration: #{$v};
		}
	}
	// `on`:
	@each $v in (line-through, underline) {
		#{$amp}on#{user.$separator}#{$v}:hover,
		#{$amp}on#{user.$separator}#{$v}:focus,
		.group:hover #{$amp}group-on#{user.$separator}#{$v},
		.group:focus #{$amp}group-on#{user.$separator}#{$v} {
			text-decoration: #{$v};
		}
	}
	// `down`:
	@each $v in (line-through, underline) {
		#{$amp}down#{user.$separator}#{$v}:active,
		.group:active #{$amp}group-down#{user.$separator}#{$v} {
			text-decoration: #{$v};
		}
	}
}

@mixin typography($font-size-range, $font-size-resolver, $line-height-range) {
	@include __whitespace;
	@include __text-align;
	@include __font-weight;
	@include __font-size-from-range($font-size-range, $font-size-resolver);
	@include __line-height-from-range($line-height-range);
	@include __text-decoration;
}
