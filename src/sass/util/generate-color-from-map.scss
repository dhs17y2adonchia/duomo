@use "sass:color";
@use "sass:map";
@use "sass:string";

@use "escape" as *;
@use "get-ampersand" as *;

@mixin generate-color-from-map($shorthand, $prop, $map, $opacity-range) {
	$amp: get-ampersand();

	@each $k, $v in $map {
		#{$amp}#{$shorthand}-#{escape($k)} {
			@if $k == transparent or $k == currentColor {
				color: #{$v};
			} @else {
				--#{$shorthand}-opacity: 1;
				#{$prop}: $v;
				#{$prop}: string.unquote(
					"rgba(#{color.red($v)}, #{color.green($v)}, #{color.blue($v)}, #{var(--#{$shorthand}-opacity)})"
				);
			}
		}
	}
	@each $v in $opacity-range {
		#{$amp}#{$shorthand}-opacity-#{escape($v * 100)} {
			--#{$shorthand}-opacity: #{$v};
		}
	}
}
