@import "./mixins/border-radius";
@import "./mixins/box-shadow";
@import "./mixins/color";
@import "./mixins/custom-props";
@import "./mixins/debugger";
@import "./mixins/display";
@import "./mixins/grid";
@import "./mixins/macos-retina";
@import "./mixins/margin";
@import "./mixins/overflow";
@import "./mixins/padding";
@import "./mixins/pointer-events";
@import "./mixins/position";
@import "./mixins/stacks";
@import "./mixins/stagger";
@import "./mixins/tailwind-base";
@import "./mixins/text";
@import "./mixins/width-and-height";
@import "./mixins/z-index";

@import "./utils/conv-functions";
@import "./utils/generate-from-map";
@import "./utils/generate-from-range";
@import "./utils/get-dynamic-ampersand";
@import "./utils/safe-functions";

@import "./design-tokens";
@import "./variables";

$separator: "\\:";

@mixin preflight {
	/* purgecss start ignore */
	@include tailwind-base;
	@include macos-retina;
	@include custom-props;
	@include stagger;
	@include debugger;
	/* purgecss end ignore */
}

@mixin props {
	@include display;
	@include stacks-from-range($range, rem);
	@include grid-from-range($range);
	@include margin-from-range(join(join($-range, auto), $range), rem);
	@include padding-from-range($range, rem);
	@include position-from-range((0));
	@include width-from-range($range, rem);
	@include width-from-range(($xs, $sm, $md, $lg, $xl), px);

	// TODO
	$amp: get-dynamic-ampersand();
	@each $key, $value in ("full": 100%, "screen": 100vw) {
		#{$amp}w-#{$key} {
			width: #{$value};
		}
	}

	@include max-width-from-map($breakpoint-map, px);
	@include height-from-range($range, rem);
	@include text-align;
	@include font-style;
	@include font-weight;
	@include font-size-from-range($font-size-range, rem);
	@include line-height-from-map($line-height-map, passthrough);
	@include line-decoration;
	@if not & {
		@include color-from-map((color), "text", $color-map);
		@include color-from-map((background-color), "bg", $color-map);
	}
	@include border-radius-from-range($short-range, rem);
	@include box-shadow-from-named-map($box-shadow-named-map);
	@include overflow;
	@include z-index-from-range($z-index-range);
	@include pointer-events;
}

@at-root {
	@include preflight;

	/*! @zaydek/duomo | MIT License | https://github.com/zaydek/duomo */
	@include props;
	@each $key, $value in $breakpoint-map {
		@media (min-width: px($value)) {
			.#{$key} {
				@at-root {
					@include props;
				}
			}
		}
	}
}
